define ("tool_componentlibrary/checkcontrast",["jquery"],function(a){var b={errors:[],warnings:[],success:[]},c={parseRgb:function parseRgb(a){var b,c,d,e,f;c=a.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/);if(c){d=c.slice(1,4);for(b=e=0;2>=e;b=++e){d[b]=+d[b]}d[3]=1}else{c=a.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/);if(c){d=c.slice(1,5);for(b=f=0;3>=f;b=++f){d[b]=+d[b]}}}return d},contrastRatio:function contrastRatio(a,b){var d=c.relativeLuminance(c.parseRgb(a)),e=c.relativeLuminance(c.parseRgb(b));return(Math.max(d,e)+.05)/(Math.min(d,e)+.05)},relativeLuminance:function relativeLuminance(a){for(var b=[],c=0,d;3>c;c++){d=a[c]/255;b.push(.03928>d?d/12.92:Math.pow((d+.055)/1.055,2.4))}return .2126*b[0]+.7152*b[1]+.0722*b[2]},getBackground:function getBackground(a){var b=getComputedStyle(a),d=b.backgroundColor,e=b.backgroundImage;if("rgba(0, 0, 0, 0)"!==d&&"transparent"!==d&&"none"===e){return d}else if("none"!==e){return"image"}if("HTML"===a.tagName){return"rgb(255, 255, 255)"}else{return c.getBackground(a.parentNode)}},isVisible:function isVisible(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},check:function check(a){for(var d=a.querySelectorAll("*"),e=0;e<d.length;e++){(function(a){var e=d[a],f=getComputedStyle(e),g=f.color,h=f.fill,i=e.tagName,j=c.getBackground(e),k=[].reduce.call(e.childNodes,function(c,a){return c+(3===a.nodeType?a.textContent:"")},""),l=k.trim(),m,n,o;if("svg"===i){var p=Math.round(100*c.contrastRatio(h,j))/100,q=p+":1";if(3>p){o="true";n="svg fill";m="fail"}}else if(l.length){if("image"===j){m="Needs manual review";n="N/A";var p="none";o=!0}else{var p=Math.round(100*c.contrastRatio(g,j))/100,q=p+":1",r=parseInt(f.fontSize),s=f.fontWeight;if(18<=r||14<=r&&700<=s){n="large scale text";if(3>p){m="fail";o=!0}else{m="pass";o=!1}}else{n="normal body text";if(4.5>p){m="fail";o=!0}else{m="pass";o=!1}}}}else{return""}if(o){var t={};t={name:e,ratio:q,detail:n,status:m};if("fail"===m){b.errors.push(t)}else if("Needs manual review"===m){b.warnings.push(t)}}else{var u={name:e,ratio:q,detail:n,status:m};b.success.push(u)}})(e)}return b}};return{init:function init(){a("[data-action=\"contrastcheck\"]").each(function(){var d=a(this)[0];c.check(d);for(var e=0,f;e<b.errors.length;e++){f=b.errors[e];a(f.name).append("<span class=\"badge badge-danger border border-dark m-1\">"+f.ratio+"</span>")}for(var e=0,f;e<b.warnings.length;e++){f=b.warnings[e];a(f.name).append("<span class=\"badge badge-warning border border-dark m-1\">"+f.ratio+"</span>")}for(var e=0,f;e<b.success.length;e++){f=b.success[e];a(f.name).append("<span class=\"badge badge-success border border-dark m-1\">"+f.ratio+"</span>")}b.errors=[];b.warnings=[];b.success=[]})}}});
//# sourceMappingURL=checkcontrast.min.js.map
